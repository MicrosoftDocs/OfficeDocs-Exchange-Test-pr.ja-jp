---
title: 'Exchange 2013 のサイズ変更と構成の推奨事項: Exchange 2013 Help'
TOCTitle: Exchange 2013 のサイズ変更と構成の推奨事項
ms:assetid: 4c4ba2fc-014a-46fb-949a-2dabba92c4a5
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Dn879075(v=EXCHG.150)
ms:contentKeyID: 63892232
ms.date: 04/24/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# Exchange 2013 のサイズ変更と構成の推奨事項

 

_**適用先:**Exchange Server 2013_

_**トピックの最終更新日:**2017-03-27_

Exchange 2013 は、Exchange の以前のバージョンよりシステム リソースの要件が厳しくなっています。Exchange 2013 のインフラストラクチャを正しくサイジングし、そのインフラストラクチャ内で Exchange 関連のコンポーネントに推奨される構成を行うと、最適に実行する展開の下地を作ることができます。

## Exchange 2013 のサイジング

Exchange 2013 を正しくサイジングすることは、パフォーマンスの問題を回避する最も効果的な方法の 1 つです。Exchange 2013 Server Role Requirements Calculator は[こちら](https://go.microsoft.com/fwlink/p/?linkid=523844)で入手できます。最新バージョンは 6.6 ですが、定期的に更新プログラムを確認することをお勧めします。この計算ツールを正しく使用するには、ブログ投稿「[Exchange 2013 Server Role Requirements Calculator](https://go.microsoft.com/fwlink/p/?linkid=386677)」および「[Exchange 2013 展開のサイジング](https://go.microsoft.com/fwlink/p/?linkid=301990)」のガイダンスを参考にする必要があります。

ハードウェアを購入して展開する前に、計算ツールの使用を開始することが重要です。まず、計算ツールの結果に基づいて、全体的なリソースの要件を決定してください。計算ツールを使用して、組織のニーズを入力してから、ハードウェアの拡大/縮小方法に関するガイダンスのために結果を使用します。計算ツールは使用するサーバーの数を示しませんが、特定のサーバー セットにおける Exchange のワークロードの影響を見積もることができます。ご使用の環境固有のハードウェアとビジネスのニーズを満たすため、さまざまな構成を試してパフォーマンスに与える影響を確認する必要があります.

展開を簡素化してハードウェアを最適に使用するため、Exchange 製品グループは複数の役割のサーバーを推奨しています。複数の役割のサーバーを使用すると、障害のシナリオのときに要求を処理するために使用できるクライアント アクセス サーバー (CAS) が多くなり、クライアント アクセス サーバー層での可用性が高くなります。Exchange 2013 の主な設計の考慮事項は、「より小さい」商品タイプのサーバーを活用する (スケール アップではなくスケール アウトする) ことです。設計とテストは、最大 20 個のプロセッサ コアおよび最大 96 ギガバイト (GB) の RAM を搭載した 2 ソケット コンピューターを使用して実行されています。ハードウェアがこれより大きい場合は、そのハードウェアを他のニーズに使用して Exchange 2013 環境向けに小規模なサーバーを購入するか、仮想化するなど、その他のオプションを検討してください。

既存の大型のサーバーにリソースを追加する (スケール アップ) よりも、より多くのサーバーをビルドする (スケール アウト) 方が好ましいです。スケール アウトを行うと、ご使用の環境は Exchange 2013 の組み込みの高可用性機能を活用できます。この構成がお勧めする理由について、詳しくはブログ投稿「[優先するアーキテクチャ](https://go.microsoft.com/fwlink/p/?linkid=523782)」および「[可用性に関するサイト復元の影響](https://go.microsoft.com/fwlink/p/?linkid=523845)」をご確認ください。

計算ツールは、Exchange サーバーで実行するサードパーティ製品、または Exchange と対話する製品 (社内開発のアプリケーションを含む) を考慮していません。つまり、サイジングの際には必ずこれらを考慮する必要があります。たとえば、Lync Server、サードパーティ製 Exchange Web サービス (EWS) アプリケーション、および ActiveSync デバイスはすべて、ユーザーあたりの CPU 要件を大きく増加させます。サードパーティ製品が Exchange に与える影響の詳細については、サードパーティ製品のドキュメントを参照してください。サードパーティのソリューションを実装する前に、Exchange のパフォーマンス ベースラインを作成することをお勧めします。

## 推奨されるパフォーマンス構成

Exchange 2013 環境に推奨されるパフォーマンスの最適化の内容は次のとおりです。

## 電源

オペレーティング システム (OS) が電源を管理できるように BIOS を設定します。

OS で、高パフォーマンス電源プランをオンにします。

## 処理

物理 Exchange サーバーでハイパースレッドをオフにします。仮想化する場合、物理サーバーでハイパー スレッディングを有効にすることができまが、各仮想サーバーには必要な数の仮想 CPU のみを割り当て (仮想 CPU を割り当て過ぎない)、サイジングの計算には物理プロセッサーのコア数のみを使用する必要があります。

Exchange Server 2013 Service Pack 1 以降では、クライアント アクセス サーバーによって CPU 使用量を軽減する SSL オフロードを有効にすることができますが、SSL オフロードの複雑な構成は利益に見合わないことがあります。

## .NET Framework


<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
<col style="width: 20%" />
</colgroup>
<thead>
<tr class="header">
<th>Exchange のバージョン</th>
<th>.NET Framework 4.7.1</th>
<th>.NET Framework 4.6.2</th>
<th>.NET Framework 4.6.1</th>
<th>.NET Framework 4.5.2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>Exchange 2013 CU19</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
<tr class="even">
<td><p>Exchange 2013 CU16 - CU18</p></td>
<td><p></p></td>
<td><p> X</p></td>
<td><p></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>


.NET 4.5.2 をインストールできない場合は、Microsoft サポート技術情報の文書番号 2995145「[パフォーマンスの問題、または Windows Server で実行されている Exchange Server 2013 に接続するときの遅延](https://go.microsoft.com/fwlink/p/?linkid=524159)」を参照してください。記事にある修正プログラムは、ストア ワーカー プロセスのメモリ使用率に関する内部の調査結果に基づいて開発されました。これらの修正プログラムを適用すると、(ストア ワーカー プロセスを含む) すべての管理プロセス全体のメモリの使用量が減少し, .NET ガベージ コレクションに使用する全体的な CPU 時間を短縮できます。

## 修正プログラム

Exchange パフォーマンス チームは、次のパフォーマンスに関連する修正プログラムをすべてインストールすることを推奨しています。

  - [Windows Server 2012 でのクラスターの復元性を向上させる更新が利用可能](https://go.microsoft.com/fwlink/p/?linkid=524088)

  - [推奨される Windows Server 2012 ベースのフェールオーバー クラスターの修正プログラムおよび更新](https://go.microsoft.com/fwlink/p/?linkid=524089)

  - [推奨される Windows Server 2012 の R2 ベースのフェールオーバー クラスターの修正プログラムおよび更新](https://go.microsoft.com/fwlink/p/?linkid=524090)

  - [マルチコア プロセッサを搭載した Windows 8 または Windows Server 2012 ベースのコンピューターに正しくない RSS プロセッサが割り当てられている](https://go.microsoft.com/fwlink/p/?linkid=324140)

  - [Windows Server で実行されている Exchange Server 2013 に接続する際のパフォーマンス上の問題または遅延](https://go.microsoft.com/fwlink/p/?linkid=312962)

  - [Outlook の接続の問題: Exchange 2013 で SSLOffloading が "True" の場合](https://go.microsoft.com/fwlink/p/?linkid=524091)

  - [Exchange Server 2013 でのデータベースのフェールオーバー後の Outlook の長時間サーバー接続](https://go.microsoft.com/fwlink/p/?linkid=524092)

  - [Lync が Exchange Server 2013 と統合している場合に Outlook Web アプリのパフォーマンスが低下する](https://go.microsoft.com/fwlink/p/?linkid=524093)

  - [EMS は、Exchange Server 2013 累積更新 5 環境で最初のコマンドを実行する際に時間がかかる](https://go.microsoft.com/fwlink/p/?linkid=524094)

  - [Exchange Server 2013 で IPv6 が有効な場合の、メッセージのルーティングの待機時間](https://go.microsoft.com/fwlink/p/?linkid=524095)

  - [Microsoft LDAP クライアントに依存するアプリケーションにより、Windows Server 2008 R2 SP1 で CPU 使用率が高くなる](https://go.microsoft.com/fwlink/p/?linkid=530287)

  - [Windows 8.1 または Windows Server 2012 R2 で HTTP プロトコル経由で RPC を使用すると CPU 使用率が高くなる](https://go.microsoft.com/fwlink/p/?linkid=619127)

## ネットワーク

Exchange 2013 では、MAPI とレプリケーション ネットワークを分割する必要がなくなったため、1 つのネットワーク アダプターを推奨しています。詳細は「[Network requirements](planning-for-high-availability-and-site-resilience-exchange-2013-help.md)」を参照してください。

利用可能な場合は既定の SNP のオフロード設定を使用し、必ず RSS を有効にしてください (Windows Server 2012 以降の既定の設定)。RSS は、特に 10 GbE で CPU 利用の拡大/縮小に役立ちます。

OS が電力を節約するためにネットワーク カードの電源をオフにしないことを確認します。

NIC ドライバーを最新の状態に維持します。関連するドライバーの更新プログラムについて、月に 1 回ベンダーに確認します。

## インターネット インフォメーション サービス (IIS)

インストール時に、Exchange は IIS のいくつかの接続制限を変更します。これ以上 IIS のチューニングしないことをお勧めします。

カスタマイズを可能な限り避けてください。web.config やレジストリ キーへのすべての変更は、Exchange の累積更新プログラムまたは Windows Update によって上書きされる可能性があります。

## 記憶域

Exchange 2013 記憶域のガイドラインは [Exchange 2013 記憶域構成オプション](exchange-2013-storage-configuration-options-exchange-2013-help.md) でご利用いただけます。

## 仮想化

[Requirements for hardware virtualization](exchange-2013-virtualization-exchange-2013-help.md) を確認してください。また、Exchange は Non-Uniform Memory Access (NUMA) に対応していないことに注意してください。このため、ハードウェア製造元の既定の NUMA 設定を使用することをお勧めします。

## Active Directory

Active Directory クエリは Exchange の展開に直接影響するため、ディレクトリ サーバーのパフォーマンスを監視します。

Active Directory の正常性に関して、LDAP の検索時間は重要な測定カウンターです。ドメイン コントローラーで CPU を監視します。ドメイン コントローラーの CPU の問題は、Exchange サーバーでのパフォーマンスの低下として表れます。

ドメイン コント ローラーのパフォーマンスの問題の原因を特定するため、\[データ コレクター セット\] の下にある、パフォーマンス モニターのドメイン コントローラーにある組み込みの \[Active Directory 診断\] を実行します。

AD データベース ファイル全体をキャッシュできるように、ドメイン コントローラーには十分な容量の RAM を計画してください。

(64 ビット グローバル カタログ コアに基づいて) アクティブな負荷を処理する 8 つのメールボックス コアごとに 1 つの Active Directory グローバル カタログ コアを展開することをお勧めします。

## 負荷分散

すべてのクライアント アクセス サーバーは、ほぼ同数の受信接続を受信する必要があります。

すべてのプロトコルで、Exchange 2013 では特定のクライアント アクセス サーバーとロード バランサーの間のセッション アフィニティは必要ありません。

クライアント アクセス サーバーへのすべての受信トラフィックを管理するハードウェアまたはソフトウェアのロード バランサーを使用してください。ターゲット サーバーの選択は、"ラウンドロビン"(受信接続ごとに循環リストの次のターゲット サーバーが選択される) や、"最小接続" (ロード バランサーが新しい各接続を、その時点で確立されている接続数が最小のサーバーに送信する) などの方式で決定できます。これらの方法については「[負荷分散](load-balancing-exchange-2013-help.md)」で詳細に説明しています。以下についても検討する必要があります。

  - ラウンドロビンには、存続期間の長い接続 (RPC/HTTP など) により収束時間が長いという問題があります。新しいコンピューターがオンラインになるとき、ターゲット コンピューターの間で取られる接続のバランスにより、収束まで非常に時間がかかります。

  - 「最小接続」方式では,クライアント アクセス サーバーの停止時またはパッチ処理によるメンテナンス時に、クライアント アクセス サーバーが過負荷になり、応答しない可能性があることに留意してください。Exchange のパフォーマンスのコンテキストで、認証はコストのかかる操作です。

Exchange 2013 環境には、Windows ネットワーク負荷分散 (NLB) の多数の制限があるため (詳細は「[負荷分散](load-balancing-exchange-2013-help.md)」で説明)、Windows NLB の使用はお勧めしません。

## ユーザーおよびデータベースの分散

データベースあたりのユーザーとサーバーあたりのアクティブなデータベースについて、適切なバランスの取れた分散を維持します。データベースのディスク容量の消費を均等に分散するとともに、データベース全体で高負荷のユーザーのバランスを取ります。

Exchange (デバイス、Outlook、および OWA) との対話方法と、パフォーマンスの観点からこの対話が引き起こす影響を理解するために、ユーザー ベースをプロファイルする必要があります。ユーザーごとの Exchange の使用法をプロファイルする方法をより深く理解するには、計算ツールのブログ投稿のセクション 2 以降を参照してください。

フェイルオーバー時またはスイッチオーバー時のバランスを維持するために、DB コピーのアクティブ化の優先順位と"MaximumPreferredActiveDatabases" (サーバーごと) の設定を構成します。

RedistributeActiveDatabases.ps1 スクリプトは、DAG ノードの間でアクティブなデータベースのバランスを取り直します。

Office 365 に一致する厳密なアイテムの数の制限を適用することをご検討ください。これを実行するには、Set-Mailbox コマンドレットと「[メールボックス フォルダーの制限](https://go.microsoft.com/fwlink/p/?linkid=398779)」に記載された情報を使用します。

## ページファイル

32 GB を超える RAM を使用している場合は、ページファイルの最大サイズを 32778 MB に設定します。

ページファイルは、Exchange データベース ファイルまたはデータベースのログ ファイルと同じドライブ上でホストしないでください。

ページファイルは固定サイズとし、Windows がサイズを管理できないようにすることが重要です。ページ ファイルの増大は非常にパフォーマンス集中型の作業になり、Exchange がストレスを受けたときに問題が発生することがあります。

完全なカーネル ダンプを取得する必要がある場合は、専用ダンプ ファイルについて、Microsoft サポート技術情報の文書番号 969028「[Windows Server 2008 および Windows Server 2008 R2 でカーネルまたは完全メモリ ダンプ ファイルを生成する方法](https://go.microsoft.com/fwlink/p/?linkid=524044)」を参照してください。

## Outlook モード

キャッシュ モードをお勧めします。キャッシュ モードを使用する利点については、「[Outlook 2013 の Exchange キャッシュ モードまたはオンライン モードを選択する](https://go.microsoft.com/fwlink/p/?linkid=524045)」をご覧ください。

パフォーマンスはサーバーのアドインと Outlook のサードパーティ製のアドイン両方の影響を受けることに注意することが重要です。オンライン モードの使用時、クライアントには、他の要因の中でもとりわけサードパーティ製のアドイン、高いアイテム数、表示の制限、メールボックスにアクセスするユーザー数によるパフォーマンスの問題が予想されます。従来のクライアントは、Outlook 2013 よりも高いアイテム数とパフォーマンスの影響を大きく受けることがあります。

組織が Outlook のオンライン モードを構成する主な理由がセキュリティ上の問題である場合は、代わりに BitLocker を使用することを検討してください。

Outlook 2013 は、ダウンロード時間を最短にし、OST ファイルのサイズを最小にする新しい「同期スライダー」機能を提供します。詳細については、「[Outlook 2013 で Exchange キャッシュ モードを構成する](https://go.microsoft.com/fwlink/p/?linkid=390456)」を参照してください。

ご使用の環境内でサポートされている Outlook クライアントの更新プログラムを月 1 回確認してください。

## サードパーティ製のソフトウェア

ベスト プラクティスとして、Exchange のパフォーマンスのトラブルシューティング時は、サードパーティ製ソフトウェアをアンインストールするか、無効にしてください。 次の一覧には、Microsoft サポートが Exchange 2013 のパフォーマンスに影響があることを確認した頻度が最も多かったサード パーティ製のソフトウェアの種類が含まれています。

  - ウイルス対策ソリューション

  - 侵入防止ソフトウェア

  - バックアップ ソフトウェア

  - ファイルとユーザー両方の監査ソフトウェア

  - アーカイブ ソリューション

