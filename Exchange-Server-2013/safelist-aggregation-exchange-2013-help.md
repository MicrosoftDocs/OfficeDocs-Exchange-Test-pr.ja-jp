---
title: 'セーフリスト集約機能: Exchange 2013 Help'
TOCTitle: セーフリスト集約機能
ms:assetid: f05430a0-0405-4b65-a18d-18c9e86a13c4
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Bb125168(v=EXCHG.150)
ms:contentKeyID: 49896546
ms.date: 05/23/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# セーフリスト集約機能

 

_**適用先:** Exchange Server 2013_

_**トピックの最終更新日:** 2013-09-30_

Microsoft Exchange Server 2013 で、*セーフリスト集約機能*とは、Microsoft Outlook と Exchange で共有されるスパム対策機能のことです。この機能は、スパム対策の宛先セーフリスト、差出人セーフリスト、受信拒否リスト、および Outlook ユーザーが構成する連絡先データからデータを収集して、このデータを Exchange のスパム対策エージェントが使用できるようにします。

セーフリスト集約機能を有効にして正しく構成すると、コンテンツ フィルター エージェントは、エンタープライズ メールボックスに追加処理なしで安全な電子メール メッセージを渡します。Outlook 宛先セーフリストまたは差出人セーフリストにユーザーが追加している連絡先、または信頼している連絡先から Outlook ユーザーが受信した電子メール メッセージは、コンテンツ フィルター エージェントによって安全であると識別されます。Outlook の*連絡先*は、ユーザーの組織の内部または外部にいる人物で、ユーザーは、連絡先について、電子メール アドレスや住所、電話番号や FAX 番号、Web ページ URL などのさまざまな情報を保存できます。

Exchange 2013 では、セーフリストの集約プロセスで、送信者フィルター エージェントが受信者ごとの受信拒否リストからの受信メッセージをブロックすることもできます。

セーフリスト集約機能は、Exchange によって実行されるスパム対策フィルター処理における誤検知の発生を減らすのに役立ちます。スパム フィルター処理のコンテキストでは、スパム フィルターが正当なメッセージを誤ってスパムとして識別すると、*誤検知*が発生します。

毎日インターネットからのメッセージを何十万通もフィルター処理するような組織では、わずかな割合の誤検知であっても、誤ってスパムと識別されたメッセージが検疫または削除された場合、これら多くのメッセージをユーザーが受け取れないことを意味します。

セーフリスト集約は、誤検知を減らすための最も有効な手段であると考えられます。Outlook 2010 以降のバージョンでは、*差出人セーフリスト*を作成できます。差出人セーフリストでは、Outlook ユーザーがメッセージの受信を希望するドメイン名または電子メール アドレスの一覧を指定します。既定では、Outlook の連絡先および Exchange のグローバル アドレス一覧に登録されている電子メール アドレスが、この一覧に含まれます。既定では、Outlook は、ユーザーがメールを送信するすべての外部連絡先を、差出人セーフリストに追加します。

**目次**

Information stored in the Outlook user's safelist collection

How Exchange uses the safelist collection

Hashing of safelist collection entries

Enabling safelist aggregation

## Outlook ユーザーのセーフリスト コレクションに格納される情報

*セーフリスト コレクション*には、ユーザーの信頼できる差出人のリスト、信頼できる宛先のリスト、受信拒否リスト、および外部連絡先のデータが集められます。このデータは、Outlook および Exchange メールボックスに格納されます。

Outlook ユーザーのセーフリスト コレクションには、以下の種類の情報が格納されます。

  - **安全な送信者と安全な受信者**   電子メール メッセージの "差出人" フィールドは、送信者を示します。電子メール メッセージの "宛先" フィールドは、受信者を示します。安全な送信者と安全な受信者は、完全な SMTP アドレス (masato@contoso.com など) によって表されます。Outlook ユーザーは、自分のセーフリストに送信者と受信者を追加できます。

  - **ブロックされる送信者**   安全な送信者と同じ方法で、ユーザーは受信拒否リストに不要な送信者を追加して、そのような送信者をブロックできます。

  - **安全なドメイン**   ドメインは、SMTP アドレスで @ 記号の後にある部分です。たとえば、masato@contoso.com というアドレスのドメインは contoso.com です。Outlook ユーザーは、自分のセーフリストに送信ドメインを追加できます。
    

    > [!IMPORTANT]
    > 既定では、Exchange セーフリスト集約にドメインは含まれていません。ただし、セーフリスト集約機能を構成して、スパム対策エージェントの安全なドメイン データを含めることができます。詳細については、「<A href="configure-content-filtering-to-use-safe-domain-data-exchange-2013-help.md">安全なドメイン データを使用するようにコンテンツ フィルタリングを構成する</A>」を参照してください。



  - **外部連絡先**   セーフリスト集約機能には、2 種類の外部連絡先を含めることができます。第 1 の種類の外部連絡先は、Outlook ユーザーがメールを送信したことのある連絡先です。このクラスの連絡先は、Outlook ユーザーが Outlook 2007 の迷惑メール設定で対応するオプションを選択した場合にのみ、差出人セーフリストに追加されます。
    
    第 2 の種類の外部連絡先は、ユーザーの Outlook 連絡先です。ユーザーは、このような連絡先を Outlook に追加またはインポートすることができます。このクラスの連絡先は、Outlook ユーザーが Outlook 2010 または Outlook 2007 の迷惑メール フィルター設定で対応するオプションを選択した場合にのみ、差出人セーフリストに追加されます。

ページのトップへ

## Exchange によるセーフリスト コレクションの使用方法

セーフリスト コレクションは、ユーザーのメールボックス サーバーに保管されます。ユーザーはセーフリスト コレクションに最大 1,024 個の一意のエントリを含めることができます。Exchange 2013 には、迷惑メールのオプション メールボックス アシスタントというメールボックス アシスタントが用意されており、メールボックスのセーフリスト コレクションへの変更を監視します。この機能は、各ユーザー オブジェクトにセーフリスト コレクションが格納されている Active Directory に変更をレプリケートします。Active Directory のユーザー オブジェクトに格納されたセーフリスト コレクションは、Exchange 2013 のスパム対策機能と集約され、記憶域とレプリケーションが最小になるように最適化されます。Exchange はコンテンツのフィルター中に、セーフリスト コレクションのデータを使用します。境界ネットワークに購読済みのエッジ トランスポート サーバーがある場合、Microsoft Exchange EdgeSync サービスはセーフリスト コレクションをエッジ トランスポート サーバー上の Active Directory Lightweight Directory Services (AD LDS) インスタンスにレプリケートします。


> [!IMPORTANT]
> セーフ宛先データは Outlook に格納されセーフリスト コレクションに集約できますが、コンテンツ フィルター機能は、セーフ宛先データに対しては機能しません。



ページのトップへ

## セーフ コレクション エントリのハッシュ

セーフリスト コレクションのエントリは、3 つのユーザー オブジェクト属性 **msExchSafeSenderHash**、**msExchSafeRecipientHash**、および **msExchBlockedSendersHash** の配列セットとして格納される前に、バイナリ ラージ オブジェクトとして 1 方向にハッシュされます (SHA-256)。データがハッシュされるときは、固定長の出力が生成され、出力は一意であると考えられます。セーフリスト コレクションのエントリのハッシュでは、4 バイトのハッシュが生成されます。インターネットからメッセージを受信すると、Exchange は送信者のアドレスをハッシュし、メッセージの送信先となった Outlook ユーザーの代わりに格納されているハッシュと比較します。送信者が安全な送信者のハッシュと一致する場合、メッセージはコンテンツ フィルター処理をバイパスします。送信者がブロックされる送信者のハッシュと一致する場合、メッセージがブロックされます。

セーフリスト コレクションのエントリの 1 方向ハッシュは、以下の重要な機能を実行します。

  - **記憶とレプリケーションの領域を最小限にする**   ほとんどの場合、ハッシュを行うことで、対象となるデータのサイズは減少します。したがって、セーフリスト コレクションのエントリのハッシュ バージョンを保存および送信することで、記憶域とレプリケーションの時間を節約できます。たとえば、ユーザーのセーフリスト コレクションに 200 個のエントリがある場合、Active Directory で格納およびレプリケートされるハッシュ データは約 800 バイトになります。

  - **ユーザーのセーフリスト コレクションを、悪意のあるユーザーが使用できないようにする**   1 方向のハッシュ値は、リバース エンジニアリングによって元の SMTP アドレスまたはドメインに戻すことができないので、Exchange サーバーを脅かそうとする悪意のあるユーザーが使用できる電子メール アドレスが生成されることはありません。

ページのトップへ

## セーフリスト集約機能を有効にする方法

Exchange 2013 では、セーフリスト集約機能は、既定で有効になっています。Exchange Server 2007 とは異なり、**Update-SafeList** コマンドレットを手動で実行する必要がなく、セーフリスト コレクションのデータをハッシュして Active Directory に書き込むことができます。Exchange 2013 では、セーフリスト コレクション データは、迷惑メール オプション メールボックス アシスタントによって Active Directory に書き込まれます。

Active Directory のセーフリスト集約データを境界ネットワークのエッジ トランスポート サーバーが利用できるようにするには、Microsoft Exchange EdgeSync サービスをインストールして構成し、セーフリスト集約データが AD LDS にレプリケートされるようにする必要があります。

**UpdateSafelist** コマンドレットを使用して、手動でセーフリスト集約を実行することもできます。ただし、このコマンドを実行するときに生成されるネットワークおよびレプリケーション トラフィックに注意してください。セーフ リストの使用頻度が高い複数のメールボックスに対して **Update-Safelist** コマンドを実行すると、大量のトラフィックが生成される場合があります。複数のメールボックスに対してこのコマンドを実行する場合は、ピーク時間外や勤務時間外に実行することをお勧めします。

**Update-SafeList** コマンドレットは、ユーザーのメールボックスからセーフリスト コレクションを読み取り、各エントリをハッシュして、簡単に検索できるようにエントリを並べ替えた後、ハッシュをバイナリ属性に変換します。最後に、**Update-SafeList** コマンドレットは、作成されたバイナリ属性を、その属性に格納されている値と比較します。2 つの値が一致する場合、**Update-SafeList** コマンドレットは、ユーザー属性の値をセーフリスト集約データで更新しません。2 つの属性値が一致しない場合には、**Update-SafeList** コマンドレットはセーフリスト集約の値を更新します。

ページのトップへ

