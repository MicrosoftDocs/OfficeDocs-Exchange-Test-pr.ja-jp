---
title: 'メールボックスの自動配布: Exchange 2013 Help'
TOCTitle: メールボックスの自動配布
ms:assetid: f4db4636-948c-466b-839c-300c1a3a9544
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Ff477621(v=EXCHG.150)
ms:contentKeyID: 59634983
ms.date: 04/24/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# メールボックスの自動配布

 

_**適用先:** Exchange Server 2010 Service Pack 2 (SP2), Exchange Server 2013_

_**トピックの最終更新日:** 2013-08-13_

メールボックス、またはメールが有効な既存のユーザーを作成または移動する場合、そのメールボックスはメールボックス データベースに格納されている必要があります。Microsoft Exchange Server 2013 では、メールボックスの自動配布を使用して Exchange にデータベースを選択させるオプションがあります。

メールボックスの自動配布を使用すると、Exchange は組織のメールボックス データベースを確認し、後で説明する条件を使用して適していないデータベースを除外し、メールボックスを配置するデータベースをランダムに選択します。この処理では、組織内のすべての適切なメールボックス データベースの間で、メールボックスがランダムに配布されます。

自動配布は、**New-Mailbox** および **Enable-Mailbox** コマンドレットの *Database* パラメーター、または **New-MoveRequest** コマンドレットの *TargetDatabase* パラメーターを指定しない場合に使用されます。


> [!NOTE]
> メールボックスの自動配布は、メールボックスが Exchange 2013 サーバーで作成された場合、Exchange 2013 サーバーに移動された場合、またはメールが有効なユーザーの場合にのみ実行されます。<STRONG>New-Mailbox</STRONG>、<STRONG>New-MoveRequest</STRONG>、および <STRONG>Enable-Mailbox</STRONG> コマンドレットは、Exchange 2013 を実行しているサーバーから実行する必要があります。Exchange は、サーバーの負荷に基づいて自動的にデータベース間で負荷を分散させるために、メールボックスを再配布しません。



次の処理を使用して、新しいメールボックス、または移動したメールボックスを配置するのに適したメールボックス データベースを探します。

1.  Exchange により Exchange 2013 組織内のすべてのメールボックス データベースの一覧を取得します。

2.  配布処理から除外されるマークが付けられたメールボックス データベースは、使用可能なデータベースの一覧から削除されています。どのデータベースが除外されるかを制御できます。詳細については、後の「自動配布からデータベースを除外する」を参照してください。

3.  操作を実行している管理者に適用されたデータベース管理スコープの外にあるメールボックス データベースは、使用可能なデータベースの一覧から削除されています。詳細については、後の「データベース スコープ」を参照してください。

4.  操作が実行されているローカルの Active Directory の外にあるメールボックス データベースは、使用可能なデータベースの一覧から削除されています。

5.  その他のメールボックス データベースの一覧から、Exchange はデータベースをランダムに選択します。そのデータベースがオンラインで正常な状態ならば、Exchange により使用されます。オフラインまたは正常な状態ではない場合は、別のデータベースがランダムに選択されます。オンラインまたは正常なデータベースが見つからない場合は、エラーが発生して操作は失敗します。

メールボックス データベースの選択の処理は、メールボックス リソース管理エージェント コマンドレット拡張エージェントにより実行されます。`Mailbox Resources Management Agent` は、コマンドレットを実行する機能を拡張する、コマンドレット拡張エージェントの 1 つです。コマンドレット拡張エージェントの詳細については、「[コマンドレット拡張エージェント](cmdlet-extension-agents-exchange-2013-help.md)」を参照してください。

メールボックスを自動配布したくない場合は、`Mailbox Resources Management Agent` を無効にすることができます。エージェントを無効にすると、その変更は Exchange 組織全体に適用されます。コマンドレット拡張エージェントを無効にする方法の詳細については、「[コマンドレット拡張エージェントの管理](manage-cmdlet-extension-agents-exchange-2013-help.md)」を参照してください。

## 自動配布からデータベースを除外する

既定では、ローカルの Exchange 2013 サイトの Active Directory サーバー上にあるオンラインで正常な状態のすべてのメールボックス データベースは、メールボックスの自動配布により選択され、新しいメールボックスまたは移動されたメールボックスを格納することができます。しかし、さまざまな理由で配布プロセスから一部のデータベースを除外する必要がある場合があります。たとえば、ユーザーが手動で指定するメールボックスのみを配置するジャーナル データベースとしてメールボックス データベースを指定する場合があります。または、定期的な保守を実行するローテーションから一時的にデータベースを除外する必要がある場合があります。Exchange 2013 には、**Set-MailboxDatabase** コマンドレットを使用して設定できる *IsExcludedFromProvisioning* パラメーターを使用して、除外処理からデータベースを完全にまたは一時的に除外するオプションがあります。


> [!NOTE]
> <EM>IsSuspendedFromProvisioning</EM> および <EM>IsExcludedFromInitialProvisioning</EM> の 2 つのパラメーターも <STRONG>Set-MailboxDatabase</STRONG> コマンドレットで使用できます。これらのパラメーターは Exchange の今後のリリースでは削除される予定で、その使用はサポートされていません。



*IsExcludedFromProvisioning* パラメーターには 2 つの有効な値、`$True` および `$False` があります。このプロパティを `$True` に設定すると、そのメールボックス データベースが自動配布の処理から除外されます。このプロパティを `$False` に設定すると、そのメールボックス データベースが自動配布の処理に含まれます。既定値は `$False` です。

メールボックス データベースを自動配布から除外するには、次のコマンドを使用します。

    Set-MailboxDatabase <database name> -IsExcludedFromProvisioning $True

メールボックス データベースが自動配布から除外されている場合、そのデータベースにメールボックスを作成する、またはメールボックスを移動するには、**New-Mailbox** および **Enable-Mailbox** コマンドレットの *Database* パラメーター、または **New-MoveRequest** コマンドレットの *TargetDatabase* パラメーターを使用するのが唯一の方法です。

## データベース スコープ

データベース管理スコープは、Exchange 2013 で利用できる、メールボックスの自動配布処理を制御する追加のレベルです。メールボックス データベースがオンラインで正常な状態でローカル Active Directory サイトにあり、自動配布処理から除外されていない場合、Exchange 2013 は、コマンドレットを実行している管理者に適用されたデータベース スコープにそのメールボックス データベースが含まれているか確認します。データベース スコープに含まれている場合、そのメールボックス データベースはその管理者が使用可能なデータベースの一覧に含まれています。

データベース スコープは、役割ベースのアクセス制御 (RBAC) というアクセス許可モデルに属する概念です。RBAC とデータベース スコープの詳細については、次のトピックを参照してください。

  - [役割ベースのアクセス制御について](understanding-role-based-access-control-exchange-2013-help.md)

  - [管理役割スコープについて](understanding-management-role-scopes-exchange-2013-help.md)

データベース スコープは、ローカルの Active Directory サイト内に自動配布が使用可能な多数のメールボックス データベースがある場合に、特定の管理者のセットが使用できるデータベースを制限する必要があるときに有用なことがあります。たとえば、使用している Exchange 2013 サーバーは複数の会社にサービスを提供できるものの、各会社がメールボックスを作成または移動できるのは割り当てられたメールボックス データベースのみにする必要がある場合などです。

既定では、Exchange 2013 組織のすべての管理者は、組織内のすべてのメールボックス データベースを見ることができます。見ることのできるデータベースを制限し、その結果、メールボックスを作成したり移動したりする可能性のあるデータベースを制限するには、次の操作を行う必要があります。

1.  **New-ManagementScope** コマンドレットを使用して、管理者が使用するメールボックス データベースのみを含む、カスタムのデータベース管理スコープを作成します。

2.  次のいずれかの方法で、新しいデータベース スコープを管理役割の割り当てに関連付けます。
    
      - **Set-ManagementRoleAssignment** コマンドレットの *CustomConfigWriteScope* パラメーターを使用して、新しいデータベース スコープを既存の管理役割の割り当てに追加します。これで、データベース スコープが管理役割グループ、ユニバーサル セキュリティ グループ (USG)、または役割の割り当てを割り当てられたユーザーに適用されました。
    
      - **New-ManagementRoleAssignment** コマンドレットを使用して、管理役割の割り当てを作成し、*CustomConfigWriteScope* パラメーターを使用して新しいデータベース スコープを指定します。管理役割と役割グループ、USG、またはユーザーの間で、役割の割り当てを作成することができます。

3.  役割グループまたは USG への役割の割り当てを作成した場合、役割の割り当ておよびデータベース スコープがユーザーに適用されるように、ユーザーを役割グループまたは USG に追加します。

4.  該当する場合、新しい役割の割り当てを割り当てたユーザー (または上記の手順で作成した役割グループまたは USG のメンバーであるユーザー) を、アクセスさせたくないデータベースを含むデータベース スコープが割り当てられる可能性のある、他の役割グループまたは USG から削除します。

5.  管理者がアクセスする必要のあるデータベースにのみアクセスできることを確認します。

これらの手順の完了後は、作成したデータベース スコープを持つ役割の割り当てを割り当てられた管理者は、指定したデータベースにメールボックスを作成する、またはメールボックスを移動することのみが可能です。

データベース スコープを使用して管理者が使用できるメールボックス データベースを制限する方法の詳細については、「[データベース スコープを使用したメールボックスの自動配布の制御](control-automatic-mailbox-distribution-using-database-scopes-exchange-2013-help.md)」を参照してください。

