---
title: 'バックアップ、復元、および障害回復: Exchange 2013 Help'
TOCTitle: バックアップ、復元、および障害回復
ms:assetid: 394fc4ed-fa02-41fa-9159-cc2754ff8875
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Dd876874(v=EXCHG.150)
ms:contentKeyID: 48269383
ms.date: 04/24/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# バックアップ、復元、および障害回復

 

_**適用先:**Exchange Server 2013_

_**トピックの最終更新日:**2016-12-09_

データ保護計画の一環として、データの保護方法について理解し、どの方法が組織のニーズに最も適しているかを判断することが重要です。データ保護計画は、展開の計画段階で行う多くの決定に依存する複雑なプロセスです。

従来、次のシナリオにバックアップが使用されてきました。

  - **障害回復**   ハードウェア障害またはソフトウェア障害の発生時には、DAG 内の複数のデータベース コピーにより、データの損失がほとんどまたは全くなく、短時間でフェールオーバーが行われるため、高可用性を実現できます。これにより、ダウンタイムとそれに伴う生産性の低下 (すなわち従来の時刻を指定したディスクまたはテープへのバックアップからの回復にかかる大きなコスト) がなくなります。DAG を複数のサイトに拡張し、ディスクやサーバー、ネットワーク、データセンターの障害からの復元に利用することもできます。

  - **誤って削除されたアイテムの回復**   従来、ユーザーが削除したアイテムを後から回復する必要がある状況では、回復するデータが収録されたバックアップ メディアを探し、なんとか目的のアイテムを見つけて、ユーザーに渡す作業が発生しました。Exchange 2013 の新しい \[回復可能なアイテム\] フォルダーを使用し、フォルダーに保留ポリシーを適用すると、すべての削除済みデータと変更済みのデータを特定の期間、保持することができるため、アイテムをより簡単に回復できます。エンド ユーザーが誤って削除したアイテムを自分で回復できるようにすることで、1 つのアイテムの回復に関連する複雑さおよび管理コストが減少するため、Exchange 管理者や IT ヘルプ デスクの負担が軽減されます。詳細については、「[メッセージングのポリシーと準拠](messaging-policy-and-compliance-exchange-2013-help.md)」および「[データ損失防止](technical-overview-of-dlp-data-loss-prevention-in-exchange.md)」を参照してください。

  - **データの長期保存**   バックアップもアーカイブとして使用されてきましたが、通常はテープを使用して、ある特定時刻のデータのスナップショットを法令遵守の要件に従って、長期間保存します。Exchange 2013 の新しいアーカイブ機能、複数のメールボックスの検索機能、およびメッセージ保持機能により、エンド ユーザーがアクセス可能な方法で長期間、データを効率的に保存する機構が得られます。これにより、高価なテープからの復元がなくなり、生産性が高まります。詳細については、「[Exchange 2013 のインプレース アーカイブ](in-place-archiving-in-exchange-2013-exchange-2013-help.md)」、「[インプレース電子情報開示 (eDiscovery)](in-place-ediscovery-exchange-2013-help.md)」、および「[インプレース保持と訴訟ホールド](in-place-hold-and-litigation-hold-exchange-2013-help.md)」を参照してください。

  - **特定時刻のデータベースのスナップショット**   組織で、メールボックス データの過去の特定時刻のコピーが必要な場合は、Exchange の機能を使って DAG 環境で時間差のあるデータベースのコピーを作成できます。これは、DAG でストアの論理的な破損が複数のデータベースのコピーにレプリケートし、過去の時点に戻る必要が生じるという稀な場合に役立ちます。管理者が誤ってメールボックスまたはユーザー データを削除した場合にも役立ちます。時間差コピーには、時間のかかるバックアップ サーバーから Exchange サーバーへのコピー処理が必要ないため、時間差コピーからの回復の方が、バックアップからの復元より速い可能性があります。ダウンタイムを短縮することで、総所有コストを大幅に削減できます。

これらの各シナリオに効率的で費用効果の高い形で適合するネイティブの Exchange 2013 機能があるため、ご使用の環境における従来型のバックアップの使用を減らすか、なくすことができる可能性があります。

Exchange ネイティブ データ保護

サポートされているバックアップ テクノロジ

Exchange 2013 VSS ライター

Exchange Server の回復

統一された連絡先ストアの回復

回復用データベース

データベースの移植性

ダイヤル トーンの移植性

## Exchange ネイティブ データ保護

Microsoft の[「優先するアーキテクチャ」](https://blogs.technet.com/b/exchange/archive/2014/04/21/the-preferred-architecture.aspx) (Exchange Server 2013) では、Exchange ネイティブ データ保護という概念を活用しています。Exchangeネイティブ データ保護は、Exchange の組み込みの機能に依存して、バックアップを使わずにメールボックスのデータを保護します (これらの機能を使用してバックアップを作成することもできます)。Exchange 2013 には、いくつかの新機能と重要な変更があり、これらを正しく展開し、構成することで、従来のデータ バックアップを作成する必要がなくなるネイティブのデータ保護を行えます。Exchange 2013 に組み込まれている高可用性機能を使用して、障害の発生時にダウンタイムとデータ損失を最小限に抑えると、メッセージング システムの総保有コストも削減できます。これらの機能を法的情報保留などの他の組み込みの機能と組み合わせることにより、従来の時刻を指定したバックアップの使用を減らしたり、なくすことで、関連コストを抑制できます。

Exchange 2013 によって従来の時刻を指定したバックアップから移行できるかどうかを判断すると共に、現在のバックアップ インフラストラクチャのコストを評価することをお勧めします。既存のバックアップ インフラストラクチャを使用して障害からの回復を試みる場合の、エンドユーザーのダウンタイムとデータ損失のコストを考慮してください。また、ハードウェア、インストール、ライセンスの各コスト、およびデータの回復とバックアップの維持に関連する管理コストも含めます。組織の要件によっては、少なくとも 3 つのメールボックス データベース コピーを使用する純粋な Exchange 2013 環境の総保有コストの方が、バックアップを使用する環境の総保有コストより少ない可能性があります。

Exchange 2013 に組み込まれた機能を従来のバックアップの置き換えとして使用するには、いくつかの問題を考慮する必要があります。組織に固有の考慮事項が存在する可能性もあります。以下は考慮すべき問題の一例です。

  - 展開するデータベースのコピーの数を特定する必要があります。RAID (Redundant Array of Independent Disks) や従来の VSS ベース バックアップのような、従来の形式のデータベース保護をやめる前に、少なくとも 3 つのメールボックス データベースの (時間差なし) コピーを展開することを強くお勧めします。

  - 目標復旧時間と目標復旧時点を明確に定義し、従来のバックアップの代わりに組み込みの機能を組み合せて使用して、これらの目標を達成できることを立証する必要があります。

  - システムで保護対策を講じた障害に対して、さまざまな障害シナリオをカバーするために各データベースのコピーがどれだけ必要かを決定する必要があります。

  - DAG またはその一部のメンバーの使用をとりやめることで、従来のバックアップ ソリューションをサポートするための十分なコストが得られるかどうかを判断する必要があります。その場合、そのソリューションにより、目標復旧時間または目標復旧時点のサービス レベル契約 (SLA) が向上するかどうかを判断する必要があります。

  - コピーをホストしている DAG メンバーで、コピーまたはコピーの整合性に影響する障害が発生した場合、特定時刻のコピーを失っても対処できるかどうかを判断する必要があります。

  - Exchange 2013 では、推奨最大メールボックス データベース サイズ 2 テラバイト (複数の高可用性メールボックス データベース コピーの使用時) というはるかに大きなメールボックスを展開できます。ほとんどの組織がより大きなメールボックスを展開すると思われますが、データベース コピーまたは時間差データベース コピーをアクティブにするときに、大量のログ ファイルの再生を必要とする場合は、目標復旧時点を決定する必要があります。

  - データベースのパッシブ コピーへの複製においてアクティブ データベース コピーの論理的な破損の検出および防止方法を明確にする必要があります。これには、このような状況が発生した場合の回復計画や、過去にこのような状況が発生した頻度も含まれます。論理的破損が組織で頻繁に発生する場合、そのシナリオを設計に取り込むことをお勧めします。それには、1 つ以上の時間差コピーを十分な再生の時間差があるウィンドウで使用し、論理的破損が発生したときに、他のデータベース コピーに破損がレプリケートされる前に検出して対応できるようにします。

正常に実行された完全または増分バックアップの最後に実行される機能の 1 つが、データベース回復で不要になったトランザクション ログ ファイルの切り詰めです。バックアップが実行されていない場合は、ログの切り詰めは発生しません。ログ ファイルの作成を防ぐには、レプリケーション データベースの循環ログを有効にします。循環ログと連続レプリケーションを組み合わせると、Extensible Storage Engine (ESE) 循環ログとは異なる、連続レプリケーション循環ログ (CRCL) と呼ばれる新しい種類の循環ログが得られます。ESE 循環ログが Microsoft Exchange Information Store サービスによって実行および管理されるのに対して、CRCL は Microsoft Exchange Replication サービスによって実行および管理されます。ESE 循環ログを有効にすると、追加のログ ファイルが生成されることはなく、必要に応じて現在のログ ファイルが上書きされます。ただし、連続レプリケーション環境では、ログの配布や再生用にログ ファイルが必要です。その結果、CRCL を有効にすると、現在のログ ファイルは上書きされず、ログの配布や再生処理用に閉じられたログ ファイルが生成されます。

具体的には、Microsoft Exchange Replication サービスではログの連続性を維持するように CRCL が管理されるため、レプリケーションに必要なログが削除されることはありません。Microsoft Exchange Replication サービスと Microsoft Exchange Information Store サービスは、どのログ ファイルを削除できるかに関してリモート プロシージャ コール (RPC) を使用して通信します。

高可用性 (時間差なし) メールボックス データベース コピーで切り詰めが発生する場合は、以下を満たしている必要があります。

  - ログ ファイルがバックアップされている、または CRCL が有効になっている。

  - ログ ファイルがチェックポイント未満である。

  - データベースの他の時間差なしコピーが削除に同意する。

  - ログ ファイルがデータベースのすべての時間差コピーによって検査されている。

時間差データベース コピーで切り詰めが発生する場合は、以下を満たしている必要があります。

  - ログ ファイルがチェックポイント未満である。

  - ログ ファイルが ReplayLagTime + TruncationLagTime より古い。

  - ログ ファイルがデータベースのアクティブ コピーで削除されている。

Exchange ネイティブ データ保護

## サポートされているバックアップ テクノロジ

Exchange 2013 は、Exchange 対応の VSS ベースのバックアップのみをサポートしています。Exchange 2013 には、Windows Server のバックアップ用プラグインがあります。このプラグインでは、Exchange データの VSS ベースのバックアップを作成し、復元できます。Exchange 2013 をバックアップおよび復元するには、Windows Server バックアップ (VSS プラグイン付き)、Microsoft System Center 2012 - Data Protection Manager、サード パーティの Exchange 対応 VSS ベース アプリケーションなど、Exchange 2013 用の VSS ライターをサポートする、Exchange 対応アプリケーションを使用する必要があります。

Windows Server バックアップを使用して Exchange データをバックアップおよび復元する詳細な手順については、「[Windows Server バックアップを使用した Exchange データのバックアップと復元](using-windows-server-backup-to-back-up-and-restore-exchange-data-exchange-2013-help.md)」を参照してください。

Exchange ネイティブ データ保護

## Exchange 2013 VSS ライター

Exchange 2013 では、Exchange 2010 と Exchange 2007 で使用していた VSS ライター アーキテクチャを大幅に変更しました。これらの Exchange の以前のバージョンには、Microsoft Exchange インフォメーション ストア サービス (store.exe) と Microsoft Exchange Replication サービス (msexchangerepl.exe) に 1 つずつ、2 つの VSS ライターが組み込まれていました。Microsoft Exchange インフォメーション ストア サービスにあった VSS ライター機能は、Exchange では Microsoft Exchange Replication サービスに移動しました。新しいライター Microsoft Exchange Writer は、今では Exchange 対応の VSS ベースのアプリケーションが使用して、アクティブ データベース コピーやパッシブ データベース コピーのバックアップを作成し、バックアップしたデータベース コピーを復元します。新しいライターは Microsoft Exchange Replication サービスで実行しますが、このライターを通知するためには Microsoft Exchange Information Store サービスが実行されている必要があります。そのため、Exchange データベースのバックアップの作成や復元には両方のサービスが必要です。

Exchange ネイティブ データ保護

## Exchange Server の回復

メールボックス サーバーとクライアント アクセス サーバーの構成設定はそのほとんどが Active Directory に保存されます。以前のバージョンの Exchange と同様、Exchange 2013 には失われたサーバーを復元するための Setup パラメーターがあります。このパラメーター */m:RecoverServer* が、Active Directory に格納されている設定および構成情報を使用して、失われたサーバーを再構築および再作成するために使用されます。ただし、ローカルの web.config およびその他の構成ファイルなど、復元されていない複数の設定があることをご承知おきください。さらに、カスタムのレジストリ エントリは復元されません。信頼性の高い変更管理プロセスを使用してこれらの変更を追跡し、作成し直すことをお勧めします。

失われた Exchange 2013 サーバーのサーバー回復を実行する詳細な手順については、「[Exchange Server を回復する](recover-an-exchange-server-exchange-2013-help.md)」を参照してください。データベース可用性グループ (DAG) に属している失われたサーバーを回復する詳細な手順については、「[データベース可用性グループのメンバー サーバーを回復させる](recover-a-database-availability-group-member-server-exchange-2013-help.md)」を参照してください。

Exchange ネイティブ データ保護

## 統一された連絡先ストアの回復

Exchange 2013 環境で Microsoft Lync Server 2013 を使用すると、ユーザーの Lync 連絡先情報はユーザーのメールボックスの特別な連絡先フォルダーに保存されます。このフォルダーを、統合連絡先ストア (UCS) と呼びます。UCS 移行メールボックスを復元すると、ターゲット ユーザーのインスタント メッセージング連絡先一覧に影響が出る場合があります。たとえば、前回のバックアップ後にユーザーが移行した場合、そのメールボックスを復元するとそのユーザーの連絡先一覧はすべて失われます。それほど重大なケースではなくても、前回のバックアップ後に行われた連絡先一覧の変更は失われます。このようなデータ損失をできるだけ防ぐため、メールボックスを復元する前に、インスタント メッセージング サーバーにユーザーのデータを戻しておいてください。

Exchange ネイティブ データ保護

## 回復用データベース

回復用データベースは特別な種類のメールボックス データベースで、回復操作の一部として、復元されたメールボックス データベースをマウントし、復元されたデータベースからデータを抽出できます。[New-MailboxRestoreRequest](https://technet.microsoft.com/ja-jp/library/ff829875\(v=exchg.150\)) コマンドレットを使用すると、回復用データベースからデータを抽出できます。抽出後、データをフォルダーにエクスポートしたり、既存のメールボックスに結合したりできます。回復用データベースを使用すると、現在のデータへのユーザー アクセスを妨げずに、データベースのバックアップやコピーからデータを回復できます。

Exchange の以前のバージョンのメールボックス データベースに回復用データベースを使用することはできません。また、データの結合と抽出に使用されるターゲット メールボックスは、回復用データベースにマウントされたデータベースと同じ Active Directory フォレスト内に存在する必要があります。

詳細については、「[回復用データベース](recovery-databases-exchange-2013-help.md)」を参照してください。回復用データベースを作成する方法の詳細については、「[回復用データベースを作成する](create-a-recovery-database-exchange-2013-help.md)」を参照してください。回復用データベースを使用する方法の詳細については、「[回復用データベースを使用してデータを復元する](restore-data-using-a-recovery-database-exchange-2013-help.md)」を参照してください。

Exchange ネイティブ データ保護

## データベースの移植性

データベースの移植性は、Exchange 2013 メールボックス データベースを同じ組織の他の Exchange 2013 メールボックス サーバーに移動またはマウントできるようにする機能です。データベースの移植性を使用すると、回復プロセスでのいくつかのエラーの発生しやすい手動による手順をなくすことで、信頼性が強化されます。また、さまざまな障害のシナリオで、データベースの移植性によって回復時間全体が短縮されます。

詳細については、「[データベースの移植性](database-portability-exchange-2013-help.md)」を参照してください。データベースの移植性を使用する詳細な手順については、「[データベースの移植性を使用して、メールボックス データベースを移動する](move-a-mailbox-database-using-database-portability-exchange-2013-help.md)」を参照してください。

Exchange ネイティブ データ保護

## ダイヤル トーンの移植性

ダイヤル トーンの移植性は、メールボックス データベース、サーバー、またはサイト全体に影響を与える障害に対し、制限付きのビジネス継続性ソリューションを提供する機能です。ダイヤル トーンの移植性によって、ユーザーは、自分のメールボックスが復元中または修復中の場合に、電子メールの送受信用に一時メールボックスを持つことができます。一時メールボックスは、同じ Exchange 2013 メールボックス サーバー上、または組織内の他のExchange 2013 メールボックス サーバー上に持つことができます。これにより、使用できなくなったサーバー上に存在していたユーザーのメールボックスを、代替サーバーでホストできるようになります。Microsoft Outlook などの自動検出をサポートしているクライアントは、ユーザーのデスクトップ プロファイルを手動で更新する必要なしに、新しいサーバーに自動的にリダイレクトされます。ユーザーの元のメールボックス データが復元された後、管理者は、そのユーザーの復元されたメールボックスとダイヤル トーン メールボックスを 1 つの最新のメールボックスに結合できます。

ダイヤル トーンの移植性のプロセスは、*ダイヤル トーン回復*と呼ばれます。ダイヤル トーン回復を行うには、メールボックス サーバーに空のデータベースを作成し、エラーが発生したデータベースと置き換えます。*ダイヤル トーン データベース*と呼ばれるこの空のデータベースによって、エラーが発生したデータベースの回復中でもユーザーは電子メールの送受信が可能となります。エラーが発生したデータベースの回復後、ダイヤル トーン データベースと回復されたデータベースが交換され、ダイヤル トーン データベースのデータが回復されたデータベースに結合されます。

詳細については、「[ダイヤル トーンの移植性](dial-tone-portability-exchange-2013-help.md)」を参照してください。ダイヤル トーン回復を実行する詳細な手順については、「[ダイヤル トーン回復を実行する](perform-a-dial-tone-recovery-exchange-2013-help.md)」を参照してください。

Exchange ネイティブ データ保護

