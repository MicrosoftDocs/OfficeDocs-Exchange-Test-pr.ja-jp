---
title: '複数の権限のあるドメインのメールを受け付けるように Exchange を構成する: Exchange 2013 Help'
TOCTitle: 複数の権限のあるドメインのメールを受け付けるように Exchange を構成する
ms:assetid: 11801f73-4934-4025-a1c1-3935dada7e9b
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Aa996314(v=EXCHG.150)
ms:contentKeyID: 51407502
ms.date: 05/23/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# 複数の権限のあるドメインのメールを受け付けるように Exchange を構成する

 

_**適用先:** Exchange Server 2013_

_**トピックの最終更新日:** 2016-06-15_

Microsoft Exchange Server 2013 では、複数の権限のあるドメインを組織に簡単に追加できます。ただし、権限のあるドメインの追加後に、権限のあるドメインを組織内で使用する方法を決める必要があります。たとえば、

  - 組織の受信者用の新しい権限のあるドメインで電子メール アドレスを追加する場合は、受信者の既存のプライマリ (返信先) アドレスを置き換えるか、または新しい電子メール アドレスをプロキシ (セカンダリ) アドレスとして追加するか。

  - 新しい権限のあるドメインの電子メール アドレスをすべての受信者とすべての受信者の種類に適用するか、または、特定の種類の受信者、あるいは財務部門のユーザーのみというように、ユーザーのプロパティに基づく特定の受信者に、新しい電子メール アドレスを適用するか。

以下に、Exchange 組織で、複数の権限のある SMTP ドメインの電子メールを受信および処理する必要がある場合のシナリオの例を示します。

  - SMTP ドメイン名を変更したが、顧客が以前の電子メール アドレスに電子メール メッセージを送信する可能性があるため、しばらくの間引き続き古いドメイン名の電子メールも受け付ける必要がある場合。新しい電子メール アドレスをプライマリ (返信先) アドレスとして設定できます。これによって、新しいアドレスは、受信者が送信するすべての電子メール メッセージに表示される既定の電子メール アドレスになります。古い電子メール アドレスをセカンダリ アドレスとして設定することができます。これによって受信者は、古い電子メール アドレスに送信される電子メールを引き続き受信できます。

  - 組織内のビジネス単位ごとに異なる電子メール アドレスを準備する場合。たとえば、Contoso.com の Active Directory フォレストに子会社である Tailspin Toys と Fourth Coffee のサブドメインが含まれている場合、これらの各ビジネス単位の受信者に、contoso.com、tailspintoys.com、および fourthcoffee.com の SMTP ドメイン名を割り当てるような場合です。

  - 電子メール ホスティング サービスを提供しており、複数の SMTP ドメイン名の電子メールを受け付ける必要がある場合。

## 始める前に把握しておくべき情報

  - このタスクの予想所要時間:30 分。

  - この手順を実行する際には、あらかじめアクセス許可を割り当てる必要があります。必要なアクセス許可の一覧については、以下を参照してください。「[メール フローのアクセス許可](mail-flow-permissions-exchange-2013-help.md)」の「承認済みドメイン」、および「[受信者のアクセス許可](recipients-permissions-exchange-2013-help.md)」の「電子メール アドレス ポリシー」。

  - 境界ネットワークでエッジ トランスポート サーバーを購読している場合は、Exchange 組織内のメールボックス サーバーに承認済みドメインを構成します。承認済みドメインの構成は、EdgeSync 同期の際にエッジ トランスポート サーバーにレプリケートされます。詳細については、「[エッジ サブスクリプション](edge-subscriptions-exchange-2013-help.md)」を参照してください。

  - 承認済みドメインを作成するとき、アドレス スペースにワイルドカード文字 (\*) を使用して、Exchange 組織によって SMTP アドレス スペースのすべてのサブドメインを許可することもできます。たとえば、contoso.com とそのすべてのサブドメインを承認済みドメインとして構成するには、SMTP アドレス スペースとして「**\*.contoso.com**」と入力します。ただし、サブドメイン名を電子メール アドレス ポリシーで使用する場合には、各サブドメインは、明示的な承認済みドメイン エントリを持っている必要があります。

  - インターネットから電子メールを受信する SMTP ドメインごとに、パブリック DNS の MX レコードが必要です。各 MX レコードは、組織の電子メールを受信するための、インターネットに接続されているサーバーに解決される必要があります。

  - Exchange 組織が電子メールをインターネットに送信し、インターネットから電子メールを受信できるように、送信コネクタと受信コネクタを構成する必要があります。インターネット送信コネクタおよび受信コネクタの構成は、Exchange トポロジによって決定されます。コネクタの構成方法については、「[コネクタ](connectors-exchange-2013-help.md)」を参照してください。

  - このトピックの手順で使用可能なキーボード ショートカットについては、「[Exchange 管理センターのキーボード ショートカット](keyboard-shortcuts-in-the-exchange-admin-center-exchange-online-protection-help.md)」を参照してください。


> [!TIP]
> 問題がある場合は、Exchange のフォーラムで質問してください。 次のフォーラムにアクセスしてください。<A href="https://go.microsoft.com/fwlink/p/?linkid=60612">Exchange Server</A>、 <A href="https://go.microsoft.com/fwlink/p/?linkid=267542">Exchange Online</A>、 または <A href="https://go.microsoft.com/fwlink/p/?linkid=285351">Exchange Online Protection</A>。



## 実行方法

## 手順 1:権限のあるドメインを作成する

## Exchange 管理センターを使用して、権限のあるドメインを作成する

1.  EAC で、<strong>メール フロー</strong> \> <strong>承認済みドメイン</strong> に移動し、<strong>追加</strong>![\[追加\] アイコン](images/JJ218640.c1e75329-d6d7-4073-a27d-498590bbb558(EXCHG.150).gif "[追加] アイコン") をクリックします。

2.  <strong>名前</strong> フィールドに、承認済みドメインの表示名を入力します。組織の各承認済みドメインには一意の表示名が必要です。これは、承認済みドメインとは異なる場合があります。たとえば、ドメイン contoso.com の表示名が Contoso Local Accepted Domain になることがあります。

3.  <strong>承認済みドメイン</strong> フィールドで、組織が電子メール メッセージを受信する SMTP 名前空間を指定します。たとえば、「contoso.com」と入力します。

4.  <strong>権限あり</strong> を選択します。

5.  <strong>保存</strong> をクリックします。

## シェルを使用して権限のあるドメインを作成する

新しい権限のあるドメインを作成するには、次の構文を使用します。

```powershell
New-AcceptedDomain -Name "<Unique Name>" -DomainName <SMTP domain> -DomainType Authoritative
```

たとえば、"Fourth Coffee subsidiary" という名前の新しい権限のあるドメインをドメイン fourthcoffee.com に作成するには、次のコマンドを実行します。

```powershell
New-AcceptedDomain -Name "Fourth Coffee subsidiary" -DomainName fourthcoffee.com -DomainType Authoritative
```

## このステップの検証方法

権限のあるドメインが正常に作成されたことを確認するには、次のいずれかの手順を実行します。

  - EAC で、<strong>メール フロー</strong> \> <strong>承認済みドメイン</strong> に移動します。作成した承認済みドメインが表示され、<strong>ドメインの種類</strong> の値が <strong>権限あり</strong> になっていることを確認します。

  - シェルでコマンド **Get-AcceptedDomain** を実行します。作成したドメインが表示され、**DomainType** の値が `Authoritative` になっていることを確認します。

## 手順 2:権限のあるドメインの電子メール アドレス ポリシーを構成する

作成した権限のある承認済みドメインを使用するには、権限のあるドメインに電子メール アドレス ポリシーを構成し、シナリオの目的を満たす必要があります。たとえば、新しい電子メール アドレス ポリシーを作成するか既存のポリシーを変更する必要があります。一部の受信者またはすべての受信者のプライマリ電子メール アドレスを置き換えることを選択し、古いプライマリ電子メール アドレスを維持するか削除するかを選択できます。このセクションでは、2 つのシナリオの例を挙げます。

## 既存のプライマリ電子メール アドレスを変更する

受信者に割り当てられているプライマリ (返信先) 電子メール アドレスを変更し、古いプライマリ電子メール アドレスをプロキシ (セカンダリ) 電子メール アドレスとして保持するには、次の手順を実行します。

## EAC を使用して既存のプライマリ電子メール アドレスを変更する

1.  EAC で、<strong>メール フロー</strong> \> <strong>電子メール アドレス ポリシー</strong> の順に移動します。変更する電子メール アドレス ポリシーを選択し、<strong>編集</strong>![編集アイコン](images/Bb124582.6f53ccb2-1f13-4c02-bea0-30690e6ea71d(EXCHG.150).gif "編集アイコン") をクリックします。

2.  <strong>電子メール アドレス ポリシー</strong> ページの <strong>電子メール アドレスの形式</strong> タブをクリックします。<strong>電子メール アドレスの形式</strong> セクションで <strong>追加</strong>![\[追加\] アイコン](images/JJ218640.c1e75329-d6d7-4073-a27d-498590bbb558(EXCHG.150).gif "[追加] アイコン") をクリックします。

3.  表示される <strong>電子メール アドレスの形式</strong> ページで次のように選択します。
    
      - <strong>承認済みドメインの選択</strong>   ドロップダウン リストをクリックし、新しい権限のあるドメインを選択します。
    
      - <strong>この形式を返信電子メール アドレスにする</strong> を選択します。
    
    完了したら、<strong>Save</strong> をクリックします。

4.  <strong>電子メール アドレス ポリシー</strong> ページで <strong>保存</strong> をクリックし、ポリシーの変更を保存します。

5.  更新が済むまでは電子メール アドレス ポリシーが適用されないことを説明する警告が表示されます。ポリシーの作成後、そのポリシーを選択して、\[詳細\] ウィンドウで <strong>適用</strong> をクリックします。

## シェルを使用して既存のプライマリ電子メール アドレスを変更する

シェルでは 2 つの個別のコマンドを使用します。片方のコマンドで既存の電子メール アドレス ポリシーを変更し、もう片方のコマンドで更新済みの電子メール アドレス ポリシーを組織の受信者に適用します。

既存のプライマリ電子メール アドレスを変更し、古いプライマリ電子メール アドレスをプロキシ アドレスとして保持するには、次のコマンドを実行します。

```powershell
Set-EmailAddressPolicy <EmailAddressPolicyIdentity> -EnabledEmailAddressTemplates SMTP:<NewPrimaryEmailAddress>,smtp:<OldPrimaryEmailAddress>
```

たとえば、組織の電子メール アドレス ポリシーで *useralias*`@contoso.com` という電子メール アドレスの形式を使用しているとします。この例では、"Default Policy" という電子メール アドレス ポリシーのプライマリ (返信先) アドレスのドメインを `@fourthcoffee.com` に変更し、`@contoso.com` ドメインの古いプライマリ返信アドレスをプロキシ (セカンダリ) アドレスとして保持します。

```powershell
Set-EmailAddressPolicy "Default Policy" -EnabledEmailAddressTemplates SMTP:@fourthcoffee.com,smtp:@contoso.com
```


> [!NOTE]
> 大文字の <CODE>SMTP</CODE> 修飾子でプライマリ (返信先) アドレスを指定します。小文字の <CODE>smtp</CODE> 修飾子でプロキシ (セカンダリ) アドレスを指定します。



更新した電子メール アドレス ポリシーを受信者に適用するには、次の構文を使用します。

```powershell
Update-EmailAddressPolicy <EamilAddressPolicyIdentity>
```

たとえば、"Default Policy" という名前の更新済みの電子メール アドレス ポリシーを適用するには、次のコマンドを実行します。

```powershell
Update-EmailAddressPolicy "Default Policy"
```

## フィルター処理された一連の受信者の既存のプライマリ電子メール アドレスを置き換える

既定の電子メール アドレス ポリシーを変更し、フィルター処理された一連の受信者に適用することはできません。新しい電子メール アドレス ポリシーを作成するか、既存のカスタム電子メール アドレス ポリシーを変更する必要があります。このセクションの例では、新しい電子メール アドレス ポリシーを作成します。この例では、指定した受信者の古いプライマリ (返信先) アドレスを新しい承認済みドメインのプライマリ アドレスで置き換え、古いプライマリ アドレスをプロキシ (セカンダリ) 電子メール アドレスとして保持しません。そのため、これに該当する受信者は古いプライマリ電子メール アドレスで電子メールを受信できなくなります。

特定のユーザーに適用される電子メール アドレス ポリシーの優先度は、既定のポリシーを含むその他の電子メール アドレス ポリシーより高くなる (整数値が小さくなる) ため、特定のユーザーに対するポリシーが先に適用されます。2 つのポリシーの優先度を同じにすることはできないため、組織の既定の電子メール アドレス ポリシーの優先度を先に下げてください。

## EAC を使用して、フィルター処理された一連の受信者の既存のプライマリ電子メール アドレスを置き換える

フィルター処理された受信者用のプライマリ電子メール アドレスとして使用される、追加の電子メール アドレスを作成するには、次の手順を実行します。

1.  EAC で、<strong>メール フロー</strong> \> <strong>電子メール アドレス ポリシー</strong> の順に移動し、<strong>追加</strong>![\[追加\] アイコン](images/JJ218640.c1e75329-d6d7-4073-a27d-498590bbb558(EXCHG.150).gif "[追加] アイコン") をクリックします。

2.  <strong>電子メール アドレス ポリシー</strong> ページで、以下のフィールドに入力します。
    
    1.  <strong>ポリシー名</strong>   わかりやすい一意の名前を入力します。
    
    2.  <strong>電子メール アドレスの形式</strong> <strong>追加</strong> ![\[追加\] アイコン](images/JJ218640.c1e75329-d6d7-4073-a27d-498590bbb558(EXCHG.150).gif "[追加] アイコン") をクリックします。表示される <strong>電子メール アドレスの形式</strong> ページで次のように選択します。
        
          - <strong>承認済みドメインの選択</strong>   ドロップダウン リストをクリックし、新しい権限のあるドメインを選択します。
        
          - <strong>電子メール アドレスの形式</strong>   組織の適切な電子メール アドレスの形式を選択します。
        
          - <strong>この形式を返信電子メール アドレスにする</strong> を選択します。
        
        完了したら、<strong>Save</strong> をクリックします。

3.  <strong>その他のポリシーと共に、この順序でこのポリシーを実行する</strong>   一般的に、特定のユーザーに適用するポリシーの優先度は、既定のポリシーを含むその他の電子メール アドレス ポリシーよりも高く (整数値を低く) する必要があります。

4.  <strong>この電子メール アドレスを適用する受信者の種類を指定する</strong>   電子メール アドレス ポリシーを適用する受信者の種類を選択します。

5.  <strong>この電子メール アドレス ポリシーを適用する受信者をさらに定義するルールを作成する</strong>   このポリシーを適用する受信者を制限するには、<strong>ルールの追加</strong> をクリックします。この操作には、ブール型の **And** 文を作成します。必要な回数だけこの手順を繰り返します。
    

    > [!NOTE]
    > 適用するルールが多すぎると、電子メール アドレス ポリシーの範囲が狭まりユーザーがまったく含まれなくなる可能性があります。



6.  <strong>ポリシーを適用する受信者をプレビューします</strong> をクリックして、ポリシーの適用対象になる受信者を表示します。

7. <strong>保存</strong> をクリックし、この変更を保存してポリシーを作成します。

8.  更新が済むまでは電子メール アドレス ポリシーが適用されないことを説明する警告が表示されます。ポリシーの作成後、そのポリシーを選択して、\[詳細\] ウィンドウで <strong>適用</strong> をクリックします。

## シェルを使用して、フィルター処理された一連の受信者の既存のプライマリ電子メール アドレスを置き換える

フィルター処理された一連の受信者のプライマリ電子メール アドレスを置き換えるには、次のコマンドを使用します。

```powershell
New-EmailAddressPolicy -Name <Policy Name> -Priority <Integer> -IncludedRecipients <RecipientTypes> <Conditional Recipient Properties> -EnabledEmailAddressTemplates SMTP:@<NewPrimaryEmailAddress>
```

この例では、"Fourth Coffee Recipients" という電子メール アドレス ポリシーを作成し、Fourth Coffee 部門のメールボックス ユーザーにそのポリシーを割り当て、その電子メール アドレス ポリシーの優先度を最高に設定してポリシーが最初に適用されるようにします。なお、この受信者の古いプライマリ電子メール アドレスを保持しないため、この受信者は古いプライマリ電子メール アドレスで電子メールを受信できなる点に注意してください。

```powershell
New-EmailAddressPolicy -Name "Fourth Coffee Recipients" -Priority 1 -IncludedRecipients MailboxUsers -ConditionalDepartment "Fourth Coffee" -EnabledEmailAddressTemplates SMTP:@fourthcoffee.com
```

該当する受信者に新しい電子メール アドレス ポリシーを適用するには、次のコマンドを実行します。

```powershell
Update-EmailAddressPolicy "Fourth Coffee Recipients"
```

## このステップの検証方法

権限のあるドメイン用に電子メール アドレス ポリシーを正常に構成したことを確認するには、次のいずれかを実行します。

  - EAC で、<strong>メール フロー</strong> \> <strong>電子メール アドレス ポリシー</strong> の順に移動します。ポリシーが正しい順序で適用されることを確認します。また、新しいポリシーまたは更新したポリシーを選択し、電子メール アドレスの形式、含まれる受信者、ポリシーが適用されたかどうかを詳細ウィンドウで確認します。

  - ポリシーの詳細を確認するには、シェルで、**Get-EmailAddressPolicy** コマンドと `Get-EmailAddressPolicy "<Policy Name>"| Format-List` コマンドを実行します。

## このタスクの検証方法

複数の権限のあるドメインのメールを受信するように Exchange を構成したことを確認するには、以下を実行します。

1.  Exchange 組織外のメールボックスから、該当する受信者にテスト メッセージを送信します。正常にメールを受け入れる電子メール アドレスを確認します。

2.  該当する受信者のメールボックスから外部の受信者にテスト メッセージを送信し、メッセージの送信元アドレスを確認します。

