---
title: 'エッジ トランスポート サーバー上での受信者フィルター処理: Exchange 2013 Help'
TOCTitle: エッジ トランスポート サーバー上での受信者フィルター処理
ms:assetid: 994eefd9-3903-41e6-a882-1e333d6d2d18
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Bb123891(v=EXCHG.150)
ms:contentKeyID: 49896384
ms.date: 05/23/2018
mtps_version: v=EXCHG.150
ms.translationtype: MT
---

# エッジ トランスポート サーバー上での受信者フィルター処理

 

_**適用先:** Exchange Server 2013_

_**トピックの最終更新日:** 2014-05-07_

受信者フィルターは、Microsoft Exchange Server 2013 のスパム対策機能で、RCPT TO SMTP ヘッダーに基づいて、受信メッセージに対して行う処理がある場合にどの処理を行うかを判断します。受信者フィルターは、受信者フィルター エージェントによって実行されます。

受信者フィルター エージェントは、組織内の対象受信者の特性に従ってメッセージをブロックします。受信者フィルター エージェントは、以下のシナリオでメッセージの受信を阻止できます。

  - **存在しない受信者**   組織のアドレス帳に存在しない受信者への配信を阻止できます。たとえば、administrator@contoso.com や support@contoso.com など、頻繁に乱用されるアカウント名への配信を停止できます。

  - **配布リストの制限**   内部ユーザーだけが使用する配布リストへのインターネット メールの配信を阻止できます。

  - **インターネットからのメッセージの受信を禁止するメールボックス**   ヘルプデスクなど、一般に組織内部で使用される特定のメールボックスやエイリアスへのインターネット メールの配信を阻止できます。

受信者フィルター エージェントは、以下のデータ ソースの一方または両方に登録されている受信者に影響を及ぼします。

  - **受信者禁止一覧**   インターネットからのメッセージの受信を拒否する、管理者が定義した受信者の一覧。

  - **受信者参照**   受信者が組織に存在することを確認する Active Directory への照会。エッジ トランスポート サーバーでは、受信者参照に EdgeSync によって Active Directory Lightweight Directory Services (AD LDS) のローカル インスタンスに提供された Active Directory 情報へのアクセスが必要です。

受信者フィルター エージェントを有効にすると、受信者の特性に従って、以下のいずれかの処理が受信メッセージに対して行われます。これらの受信者は、RCPT TO ヘッダーで指定されます。

  - 受信者禁止一覧に登録されている受信者が受信メッセージに含まれていると、Exchange サーバーは、"`550 5.1.1 User unknown`" という SMTP セッション エラーを送信側サーバーに送信します。

  - 受信者参照内のどの受信者にも一致しない受信者が受信メッセージに含まれていると、Exchange サーバーは、"`550 5.1.1 User unknown`" という SMTP セッション エラーを送信側サーバーに送信します。

  - 受信者が受信者禁止一覧に登録されていないものの、受信者参照にはあるというとき、Exchange サーバーは、"`250 2.1.5 Recipient OK`" という SMTP 応答を送信側サーバーに送信し、チェーン内の次のスパム対策エージェントがメッセージを処理します。

**目次**

Configuring recipient lookup

Tarpitting functionality

Multiple namespaces

## 受信者参照の構成

スパムを削減するための最も効果的な方法の 1 つは、インターネットからの受信メッセージを受け付ける前に受信者を検証することです。Exchange 管理シェルの **Set-RecipientFilterConfig** コマンドレットを使用して、Exchange 組織に存在しない受信者に送信されたメッセージのブロック、および特定の受信者のブロックを有効にします。詳細については、「[エッジ トランスポート サーバーでの受信者フィルターの管理](manage-recipient-filtering-on-edge-transport-servers-exchange-2013-help.md)」を参照してください。

エッジ トランスポート サーバーが境界ネットワークにインストールされている場合は、Active Directory と同期するように、エッジ トランスポート サーバーで実行されている AD LDS インスタンスを構成することをお勧めします。既定では、AD LDS はエッジ トランスポート サーバーにインストールされ構成されています。ただし、組織でエッジ トランスポート サーバーを購読して、Active Directory ドメインに参加しているグローバル カタログと通信できるように AD LDS を構成する必要があります。詳細については、「[Exchange 2013 での Exchange 2010 または 2007 エッジ トランスポート サーバーの使用](use-an-exchange-2010-or-2007-edge-transport-server-in-exchange-2013-exchange-2013-help.md)」を参照してください。

ページのトップへ

## タールピット機能

受信者参照機能により、送信側サーバーで電子メール アドレスが有効か無効かを判別することができます。前述したように、受信メッセージの受信者が既知の受信者である場合、Exchange サーバーは、"`250 2.1.5 Recipient OK`" という SMTP 応答を送信側サーバーに返します。この機能により、ディレクトリ獲得攻撃に備えた理想的な環境が実現します。

*ディレクトリ獲得攻撃 (DHA 攻撃)* とは、特定の組織から有効な電子メール アドレスを収集して、スパム データベースに追加しようとする試みです。受信者が電子メール メッセージを開かない限りスパムによる収益は得られないため、有効性が確認されているアドレスは、悪意のあるユーザー、つまり*スパム発信者*にとって価値のある商品となります。SMTP プロトコルを使用すると、既知の送信者と不明な送信者に関するフィードバックが提供されるため、スパム発信者は、一般的な名前や辞書に記載されている用語を使用して、特定のドメインに宛てた電子メール アドレスを構成する自動プログラムを作成できます。このプログラムは "`250 2.1.5 Recipient OK`" という SMTP 応答を返すすべての電子メール アドレスを収集し、"`550 5.1.1 User unknown`" という SMTP セッション エラーを返すすべての電子メール アドレスを破棄します。スパム発信者は、有効な電子メール アドレスを売ったり、迷惑メールの受信者として使用する可能性があります。

ディレクトリ獲得攻撃を防止するために、Exchange 2013 にはタールピット機能が搭載されています。*タールピット*とは、容量の大きなスパムや他の望ましくないメッセージを示す特定の SMTP 通信パターンに対して、サーバーの応答を意図的に遅延させる方法です。タールピットの目的は、このような電子メール トラフィックの通信処理速度を低下させ、スパムを送信している個人または組織のスパム送信コストを増大させることにあります。タールピットによって、ディレクトリ獲得攻撃には非常にコストがかかるようになり、効率的な自動化が不可能になります。

タールピットが構成されていない場合、受信者が受信者参照に存在しないと、Exchange サーバーは直ちに "`550 5.1.1 User unknown`" という SMTP セッション エラーを送信者に返します。反対に、タールピットが構成されている場合は、SMTP は指定した秒数が経過するまで待機してから、"`550 5.1.1 User unknown`" エラーを返します。このように SMTP セッションで一時停止期間を設けることにより、ディレクトリ獲得攻撃の自動化はさらに困難になり、スパム発信者にとっての費用対効果が低下します。既定では、タールピットは受信コネクタで 5 秒に構成されています。

SMTP が "`550 5.1.1 User unknown`" エラーを返すまでに遅延を構成するには、**Set-ReceiveConnector** コマンドレットで、*TarpitInterval* パラメーターを使用して、タールピット間隔を設定します。構文は次のようになります。

```powershell
Set-ReceiveConnector <Receive Connector> -TarpitInterval <00:00:00 to 00:10:00>
```

既定値は `00:00:05`、つまり 5 秒間です。エッジ トランスポート サーバーの既定の受信コネクタの名前は `Default internal receive connector <server name>` です。

タールピット間隔を変更する場合は注意が必要です。この間隔が長すぎると通常のメール フローが中断する場合がありますが、短すぎるとディレクトリ獲得攻撃を効果的に防ぐことができない可能性があります。タールピット間隔の値を変更する場合は、少しずつ変更して、結果を確認してください。たとえば、5 秒間が効果的でないときは、間隔を 10 秒間に変更してみます。

ページのトップへ

## 複数の名前空間

受信者フィルター エージェントは権限のあるドメインに対してのみ受信者参照を実行します。組織が内部の中継ドメインまたは外部の中継ドメインとして構成された別のドメインの代わりにメッセージを受け取って転送している場合、受信者フィルター エージェントはそれらのドメインの受信者に対する受信者参照を実行しません。ただし、受信者が受信者禁止一覧に登録されていても、受信者は受信者フィルター エージェントにブロックされます。

承認済みドメインはエッジ トランスポート サーバーでローカルに構成することもできます。ドメインが内部の中継ドメインまたは外部の中継ドメインとして構成されている場合、エッジ トランスポート サーバーの受信者フィルター エージェントもそれらのドメインの受信者に受信者参照は実行しません。

ページのトップへ

