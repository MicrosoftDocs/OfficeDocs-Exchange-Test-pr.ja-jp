---
title: 'ダイレクト プッシュ: Exchange 2013 Help'
TOCTitle: ダイレクト プッシュ
ms:assetid: 373c1629-3d4b-4828-b014-9e103de4ef25
ms:mtpsurl: https://technet.microsoft.com/ja-jp/library/Aa997252(v=EXCHG.150)
ms:contentKeyID: 48269362
ms.date: 04/24/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# ダイレクト プッシュ

 

_**適用先:**Exchange Online, Exchange Server 2013_

_**トピックの最終更新日:**2012-07-11_

ダイレクト プッシュは、Microsoft Exchange Server 2013 に組み込まれている機能です。 ダイレクト プッシュにより、携帯ネットワーク接続やワイヤレス ネットワーク接続で、モバイル デバイスを最新の状態に維持できます。 新しいコンテンツの同期準備ができるとダイレクト プッシュはモバイル デバイスに通知します。

**目次**

概要

ダイレクト プッシュ トポロジ

ファイアウォール経由で機能するためのダイレクト プッシュの構成

## 概要

ダイレクト プッシュが機能するためには、モバイル デバイスがダイレクト プッシュに対応している必要があります。 対応しているデバイスには、以下のものが含まれます。

  - Windows Phone のすべてのバージョン

  - Microsoft Exchange ActiveSync のライセンスによって製造され、ダイレクト プッシュと互換性があるように特に設計された携帯電話

Exchange 2013 では、ダイレクト プッシュは既定で有効になっています。 ダイレクト プッシュをサポートするモバイル デバイスは、Microsoft Exchange を実行しているサーバーに存続期間の長い HTTPS 要求を発行します。 Exchange サーバーは、ユーザーのメールボックスのアクティビティを監視し、新規の電子メール、予定表、連絡先、またはタスク アイテムや、それらの変更があると、モバイル デバイスに応答を送信します。 HTTPS 要求の存続期間内に変更が生じると、Exchange サーバーは、変更が生じたため Exchange サーバーとの同期を開始する必要があることを知らせる応答をデバイスに発行します。 次に、デバイスはサーバーにこの要求を発行します。 同期が完了すると、存続期間の長い HTTPS 要求が新しく生成され、この処理全体がもう一度開始されます。 こうして、電子メール、予定表、連絡先、タスク アイテムはモバイル デバイスにすみやかに配信されて、デバイスを常に Exchange サーバーと同期させておくことができます。

## ダイレクト プッシュ トポロジ

ダイレクト プッシュは次のように動作します。

1.  Exchange 2013 サーバーと同期するように構成されたモバイル デバイスは、サーバーに HTTPS 要求を発行します。 この要求は PING と呼ばれます。 この要求は、同期対象として構成したフォルダーのアイテムに今後 15 分以内に変更が生じた場合はデバイスに通知するようにサーバーに伝えます。 変更がなければ、サーバーは HTTP 200 OK メッセージを返します。 この後、モバイル デバイスは待機します。 この 15 分の間隔を、*ハートビート間隔*と呼びます。

2.  15 分間アイテムに変更がなければ、サーバーは HTTP 200 OK の応答を返します。 モバイル デバイスはこの応答を受信すると、動作を再開し (*ウェイクアップ*と呼ばれます)、もう一度要求を発行します。 これで処理が再開されます。

3.  15 分のハートビート間隔の間に、アイテムに変更があったり、新しいアイテムが受信されたりした場合、サーバーは、新しいアイテムまたは変更されたアイテムがあることを、そのアイテムが置かれているフォルダーの名前と共にモバイル デバイスに通知する応答を送信します。 この応答を受信したモバイル デバイスは、新規アイテムや変更アイテムがあるフォルダーの同期要求を発行します。 同期が完了すると、モバイル デバイスは新しい PING 要求を発行し、処理全体を最初からやり直します。

ダイレクト プッシュには、存続期間の長い HTTPS 要求がサポートされるネットワーク状況が必要です。 モバイル デバイスのキャリアのネットワークまたはファイアウォールが、存続期間の長い HTTPS 要求をサポートしていなければ、HTTPS 要求は停止されます。 以下の手順では、モバイル デバイスのキャリアのネットワークでタイムアウト値が 13 分に設定されている場合に、ダイレクト プッシュがどのように動作するかを示します。

1.  モバイル デバイスがサーバーに HTTPS 要求を発行します。 この要求は、同期対象として構成したフォルダーのアイテムに今後 15 分以内に変更が生じた場合はデバイスに通知するようにサーバーに伝えます。変更がなければ、サーバーは HTTP 200 OK メッセージを返します。この後、モバイル デバイスは待機します。

2.  サーバーが 15 分後に応答しない場合、モバイル デバイスはウェイクアップし、ネットワークが原因でサーバーへの接続がタイムアウトしたと判断します。 デバイスは HTTPS 要求を再発行しますが、今回は 8 分のハートビート間隔を使用します。

3.  8 分後、サーバーは HTTP 200 OK メッセージを送信します。 デバイスは次に、ハートビート間隔が 12 分の新しい HTTPS 要求をサーバーに発行し、さらに長時間の接続を取得しようと試みます。

4.  4 分後、新しい電子メール メッセージが受信され、サーバーは、デバイスに同期するように指示する HTTPS 要求を送信することによって応答します。 デバイスは同期を行い、ハートビート間隔が 12 分の HTTPS 要求を再発行します。

5.  12 分後、新しいアイテムや変更されたアイテムがない場合、サーバーは HTTP 200 OK メッセージを送信することによって応答します。 デバイスはウェイクアップし、ネットワーク状況では 12 分のハートビート間隔がサポートされると判断します。 デバイスは次に、ハートビート間隔が 16 分の HTTPS 要求を再発行して、さらに長時間の接続を取得しようと試みます。

6.  16 分後、サーバーからの応答が受信されません。 デバイスはウェイクアップし、ネットワークの状態では 16 分のハートビート間隔がサポートされないと判断します。 この失敗は、デバイスがハートビート間隔を広げようとした直後に発生したため、デバイスはハートビート間隔が最大限度に達したと判断します。 デバイスは次に、最後に成功したハートビート間隔は 12 分であったため、ハートビート間隔が 12 分の HTTPS 要求を発行します。

モバイル デバイスは、そのネットワークでサポートされる最長のハートビート間隔の使用を試みます。 これにより、デバイスのバッテリ寿命が延びて、ネットワーク上を転送されるデータの量が減少します。モバイル キャリアは、モバイル デバイスのレジストリ設定でハートビートの最大値、最小値、および初期値を指定できます。

## ファイアウォール経由で機能するためのダイレクト プッシュの構成

ダイレクト プッシュがファイアウォール経由で機能するには、TCP ポート 443 を開く必要があります。このポートは SSL (Secure Sockets Layer) のために必要で、インターネットと、クライアント アクセス サーバーとの間で開かれている必要があります。

ファイアウォールでポートを開くだけでなく、ダイレクト プッシュのパフォーマンスを最適化するため、ファイアウォールでのタイムアウト値を既定値である 15 分から 30 分に増やす必要があります。 HTTPS 要求の最大限の存続期間は、以下の設定によって決まります。

  - インターネットからクライアント アクセス サーバーへのトラフィックを制御する、ファイアウォールで設定されている最大タイムアウト値

  - モバイル サービス プロバイダーによって設定されたファイアウォールのタイムアウト値

